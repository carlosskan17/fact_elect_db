CREATE SCHEMA `factura_electronica` ;



CREATE TABLE `factura_electronica`.`mv_facturacion` (
  `accion` CHAR(1) NOT NULL,
  `mv_facturacioncol` VARCHAR(45) NULL,
  PRIMARY KEY (`accion`));




ALTER TABLE `factura_electronica`.`mv_facturacion` 
CHANGE COLUMN `mv_facturacioncol` `mv_facturacioncol` VARCHAR(45) NULL DEFAULT NULL FIRST,
ADD COLUMN `cantidad` INT NOT NULL AFTER `accion`,
ADD COLUMN `cod_cliente` VARCHAR(11) NOT NULL AFTER `cantidad`,
ADD COLUMN `cod_distrito` CHAR(6) NOT NULL AFTER `cod_cliente`,
ADD COLUMN `cod_empresa` VARCHAR(11) NOT NULL AFTER `cod_distrito`,
ADD COLUMN `cod_motivo` CHAR(2) NULL AFTER `cod_empresa`,
ADD COLUMN `cod_oficina` CHAR(3) NOT NULL AFTER `cod_motivo`,
ADD COLUMN `cod_unidad_negocio` CHAR(1) NOT NULL AFTER `cod_oficina`,
ADD COLUMN `cod_usuario` VARCHAR(10) NOT NULL AFTER `cod_unidad_negocio`,
ADD COLUMN `cod_usuario_anula` VARCHAR(10) NULL AFTER `cod_usuario`,
ADD COLUMN `collect` VARCHAR(1) NOT NULL AFTER `cod_usuario_anula`,
ADD COLUMN `emi_unico_ope` CHAR(2) NULL AFTER `collect`,
ADD COLUMN `estado` CHAR(1) NOT NULL AFTER `emi_unico_ope`,
ADD COLUMN `fecha_anulacion` DATETIME(6) NULL AFTER `estado`,
ADD COLUMN `fecha_vencimiento` DATETIME(6) NULL AFTER `fecha_anulacion`,
ADD COLUMN `formato` CHAR(1) NOT NULL AFTER `fecha_vencimiento`,
ADD COLUMN `formato_relacionado` CHAR(1) NULL AFTER `formato`,
ADD COLUMN `glosa` VARCHAR(250) NULL AFTER `formato_relacionado`,
ADD COLUMN `imp_tot_exonerada` DECIMAL NULL AFTER `glosa`,
ADD COLUMN `imp_tot_inafecta` DECIMAL NULL AFTER `imp_tot_exonerada`,
ADD COLUMN `isc` DECIMAL NULL AFTER `imp_tot_inafecta`,
ADD COLUMN `fecha_modifica` DATETIME(6) NULL AFTER `isc`,
ADD COLUMN `fecha_emision` DATETIME(6) NOT NULL AFTER `fecha_modifica`,
ADD COLUMN `fecha_crea` DATETIME(6) NULL AFTER `fecha_emision`,
ADD COLUMN `serie_relacionado` CHAR(3) NULL AFTER `fecha_crea`,
ADD COLUMN `mv_facturacioncol2` VARCHAR(45) NULL AFTER `serie_relacionado`,
ADD COLUMN `moneda` CHAR(1) NOT NULL AFTER `mv_facturacioncol2`,
ADD COLUMN `cliente` INT NOT NULL AFTER `moneda`,
ADD COLUMN `nro_documento` INT NOT NULL AFTER `cliente`,
ADD COLUMN `nro_relacionado` INT NULL AFTER `nro_documento`,
ADD COLUMN `nro_unico_ope` CHAR(9) NULL AFTER `nro_relacionado`,
ADD COLUMN `nro_voucher` INT NULL AFTER `nro_unico_ope`,
ADD COLUMN `observacion` VARCHAR(250) NULL AFTER `nro_voucher`,
ADD COLUMN `otro_tributo` DECIMAL NULL AFTER `observacion`,
ADD COLUMN `serie_documento` CHAR(3) NOT NULL AFTER `otro_tributo`,
ADD COLUMN `serie_voucher` CHAR(3) NULL AFTER `serie_documento`,
ADD COLUMN `tipo_cambio` DECIMAL NOT NULL AFTER `serie_voucher`,
ADD COLUMN `tipo_documento` CHAR(1) NOT NULL AFTER `tipo_cambio`,
ADD COLUMN `tipo_emision` CHAR(1) NOT NULL AFTER `tipo_documento`,
ADD COLUMN `tipo_relacionado` CHAR(1) NULL AFTER `tipo_emision`,
ADD COLUMN `tipo_venta` CHAR(1) NOT NULL AFTER `tipo_relacionado`,
ADD COLUMN `usuario_crea` VARCHAR(10) NULL AFTER `tipo_venta`,
ADD COLUMN `usuario_modifica` VARCHAR(10) NULL AFTER `usuario_crea`,
ADD COLUMN `valor_descuento` DECIMAL NOT NULL AFTER `usuario_modifica`,
ADD COLUMN `valor_igv` DECIMAL NOT NULL AFTER `valor_descuento`,
ADD COLUMN `valor_imponible` DECIMAL NOT NULL AFTER `valor_igv`,
ADD COLUMN `valor_total` DECIMAL NOT NULL AFTER `valor_imponible`,
ADD COLUMN `valor_venta` DECIMAL NOT NULL AFTER `valor_total`,
ADD PRIMARY KEY (`cod_empresa`, `formato`, `nro_documento`, `serie_documento`, `tipo_documento`);




CREATE TABLE `factura_electronica`.`mv_manifiesto_salida` (
  `cargo_adjunto` CHAR(1) NOT NULL,
  `ciudad_destino` CHAR(3) NOT NULL,
  `ciudad_origen` CHAR(3) NOT NULL,
  `cod_articulo` CHAR(3) NOT NULL,
  `cod_cliente` CHAR(11) NOT NULL,
  `cod_distrito` CHAR(6) NOT NULL,
  `cod_empresa` VARCHAR(11) NULL,
  `cod_motivo` CHAR(2) NULL,
  `cod_oficina` CHAR(3) NOT NULL,
  `cod_of_bco_nac` INT NULL,
  `cod_sector` INT NULL,
  `cod_servicio` CHAR(2) NOT NULL,
  `cod_tarifa` CHAR(3) NOT NULL,
  `cod_usuario_anula` VARCHAR(10) NULL,
  `consignado` VARCHAR(40) NOT NULL,
  `direccion_entrega` VARCHAR(50) NOT NULL,
  `dni_consig` VARCHAR(15) NULL,
  `doc_ref` VARCHAR(10) NULL,
  `emision` CHAR(2) NOT NULL,
  `emi_tran_rpt` CHAR(3) NULL,
  `estado` CHAR(1) NOT NULL,
  `fecha_anulacion` DATETIME(6) NULL,
  `feacha_crea` DATETIME(6) NULL,
  `fecha_manifiesto` DATETIME(6) NULL,
  `fecha_modifica` DATETIME(6) NULL,
  `fecha_remito` DATETIME(6) NULL,
  `formato` CHAR(1) NULL,
  `grp_sector` CHAR(2) NULL,
  `ind_remito_grupo` CHAR(1) NULL,
  `nro_cargo_adjunto` INT NULL,
  `nro_cliente` INT NOT NULL,
  `nro_documento` INT NULL,
  `nro_est_cta` INT NULL,
  `nro_guia_bco_nca` VARCHAR(8) NULL,
  `nro_manifiesto` CHAR(1) NOT NULL,
  `nro_ord_serv` INT NULL,
  `nro_pieza` INT NOT NULL,
  `nro_recojo` INT NULL,
  `nro_salida` INT NOT NULL,
  `nro_tramite` VARCHAR(13) NULL,
  `nro_tran_rpt` INT NULL,
  `observacion` VARCHAR(80) NULL,
  `otro_documento` VARCHAR(40) NULL,
  `pdm_interbank` CHAR(8) NULL,
  `peso_consignado` INT NOT NULL,
  `remito` VARCHAR(8) NOT NULL,
  `retorno` CHAR(1) NULL,
  `sector_base` CHAR(4) NULL,
  `serie_documento` CHAR(3) NULL,
  `serie_est_cta` CHAR(3) NULL,
  `serie_guia_bco_nac` VARCHAR(4) NULL,
  `serie_ord_serv` CHAR(3) NULL,
  `telefono_consig` VARCHAR(30) NULL,
  `tipo_consignado` CHAR(1) NULL,
  `tipo_despacho` CHAR(1) NOT NULL,
  `tipo_documento` CHAR(1) NULL,
  `tipo_envio` CHAR(1) NOT NULL,
  `tipo_transito` CHAR(1) NULL,
  `tipo_valija_bco_nac` CHAR(1) NULL,
  `tipo_venta` CHAR(1) NOT NULL,
  `usuario_crea` VARCHAR(10) NULL,
  `usuario_modifica` VARCHAR(11) NULL,
  `valorado` CHAR(1) NULL,
  `valor_declarado` DECIMAL NULL,
  PRIMARY KEY (`emision`, `nro_pieza`, `tipo_envio`));



CREATE TABLE `factura_electronica`.`mv_costo_salida` (
  `emision` CHAR(2) NOT NULL,
  `fecha__crea` DATETIME(6) NULL,
  `fecha_modifica` DATETIME(6) NULL,
  `moneda` CHAR(1) NOT NULL,
  `nro_salida` INT NOT NULL,
  `remito` VARCHAR(8) NOT NULL,
  `tipo_cambio` DECIMAL NOT NULL,
  `tipo_envio` CHAR(1) NOT NULL,
  `usuario_crea` VARCHAR(10) NULL,
  `usuario_modifica` VARCHAR(10) NULL,
  `valor_base` DECIMAL NOT NULL,
  `valor_descuento` DECIMAL NOT NULL,
  `valor_embalaje` DECIMAL NOT NULL,
  `valor_exceso` DECIMAL NOT NULL,
  `valor_igv` DECIMAL NOT NULL,
  `valor_seguro` DECIMAL NOT NULL,
  `valor_transporte` DECIMAL NOT NULL,
  `valor_otro_copy1` DECIMAL NOT NULL);